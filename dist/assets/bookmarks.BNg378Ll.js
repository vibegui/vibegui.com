import{a as o,R as P,j as t}from"./react.Cu7fmCo9.js";import{P as ne}from"./index.jVfCXACZ.js";import{s as ce,B as ie,c as de,g as ue}from"./bookmark-modal.D_NTTl-S.js";import"./react-dom.Ch-CG1a-.js";import"./markdown.BaswSlok.js";function c(a,y){return a?.includes(y)??!1}const xe={github:/github\.com/i,linkedin:/linkedin\.com/i,twitter:/twitter\.com|x\.com/i,youtube:/youtube\.com|youtu\.be/i,instagram:/instagram\.com/i,medium:/medium\.com/i,substack:/substack\.com/i,reddit:/reddit\.com/i,hackernews:/news\.ycombinator\.com/i,discord:/discord\.com|discord\.gg/i};function O(a){for(const[y,B]of Object.entries(xe))if(B.test(a))return y;return null}const d={mcp:{label:"MCP Developer",color:"#8b5cf6",icon:"ðŸ”Œ"},founder:{label:"Startup Founder",color:"#f59300",icon:"ðŸš€"},investor:{label:"VC Investor",color:"#10b981",icon:"ðŸ’°"}},me=typeof window<"u"&&(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1");function fe({stars:a}){return a?t.jsxs("span",{title:`${a}/5`,children:["â­".repeat(a),t.jsx("span",{className:"opacity-30",children:"â˜†".repeat(5-a)})]}):t.jsx("span",{className:"text-gray-400",children:"â€”"})}function je(){const[a,y]=o.useState([]),[B,V]=o.useState(!0),[$,G]=o.useState(null),[u,U]=o.useState(""),[k,W]=o.useState(null),[b,q]=o.useState(null),[j,H]=o.useState(null),[f,J]=o.useState("analyzed"),[S,Q]=o.useState(null),[N,X]=o.useState(null),[F,Y]=o.useState(!1),[I,Z]=o.useState(!1),[R,ee]=o.useState(!1),[h,te]=o.useState("all"),[m,C]=o.useState(null),[T,p]=o.useState(null),g=o.useRef([]),[v,E]=o.useState(null),[re,z]=o.useState(!1),M=(e,r="dev")=>{C({url:e,tab:r})};P.useEffect(()=>{async function e(){try{const r=await ue();y(r)}catch(r){G(r.message)}finally{V(!1)}}e()},[]),P.useEffect(()=>{if(u.length<3){E(null);return}const e=setTimeout(async()=>{z(!0);try{const r=await ce(u);E(r)}catch(r){console.error("Search failed:",r),E(null)}finally{z(!1)}},300);return()=>clearTimeout(e)},[u]),P.useEffect(()=>{const e=r=>{if(m)return;const l=g.current;if(l.length!==0)if(r.key==="ArrowDown"||r.key==="j")r.preventDefault(),p(s=>s===null?0:Math.min(s+1,l.length-1));else if(r.key==="ArrowUp"||r.key==="k")r.preventDefault(),p(s=>s===null?0:Math.max(s-1,0));else if(r.key==="Enter"&&T!==null){const s=l[T];s&&M(s.url)}else r.key==="Escape"&&p(null)};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[m,T]);const se=()=>{C(null)},i=m?a.find(e=>e.url===m.url):null,n=a.filter(e=>e.classified_at),K=n.flatMap(e=>e.tags||[]),_=[...new Set(K.filter(e=>e.startsWith("tech:")))].map(e=>e.replace("tech:","")).sort(),D=[...new Set(K.filter(e=>e.startsWith("type:")))].map(e=>e.replace("type:","")).sort(),L=[...new Set(n.map(e=>O(e.url)).filter(Boolean))].sort(),A=(v?v.map(e=>e.bookmark):n).filter(e=>{if(k==="mcp"&&!c(e.tags,"persona:mcp_developer")||k==="founder"&&!c(e.tags,"persona:startup_founder")||k==="investor"&&!c(e.tags,"persona:vc_investor")||b&&!c(e.tags,`tech:${b}`)||j&&!c(e.tags,`type:${j}`)||S&&(e.stars||0)<S||N&&O(e.url)!==N)return!1;if(u.length>0&&u.length<3){const r=u.toLowerCase();if(!e.title?.toLowerCase().includes(r)&&!e.url.toLowerCase().includes(r)&&!e.description?.toLowerCase().includes(r))return!1}if(v&&h!=="all"){const r=v.find(l=>l.bookmark.url===e.url);if(r&&(h==="content"&&!r.matches.content||h==="research"&&!r.matches.research||h==="insight"&&!r.matches.insight))return!1}return!0}).sort((e,r)=>{if(f==="alpha")return(e.title||"").localeCompare(r.title||"");if(f==="rating")return(r.stars||0)-(e.stars||0);if(f==="published"){const l=e.published_at?new Date(e.published_at).getTime():0;return(r.published_at?new Date(r.published_at).getTime():0)-l}if(f==="analyzed"){const l=e.classified_at?new Date(e.classified_at).getTime():0;return(r.classified_at?new Date(r.classified_at).getTime():0)-l}return 0});g.current=A;const x=8,le=F?_:_.slice(0,x),oe=I?D:D.slice(0,x),ae=R?L:L.slice(0,x);return B?t.jsx("div",{className:"container py-16",children:t.jsx("div",{className:"text-center",style:{color:"var(--color-fg-muted)"},children:"Loading bookmarks..."})}):$?t.jsx("div",{className:"container py-16",children:t.jsxs("div",{className:"text-center text-red-500",children:["Error: ",$]})}):t.jsxs("div",{className:"container py-8",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx(ne,{title:"Bookmarks",subtitle:`${n.length} curated links`}),me&&t.jsx("a",{href:"/bookmarks/edit",className:"px-3 py-1.5 rounded-lg text-sm font-medium transition-colors",style:{backgroundColor:"var(--color-accent)",color:"#fff"},children:"âœï¸ Edit"})]}),t.jsxs("div",{className:"p-4 rounded-xl mb-6",style:{backgroundColor:"var(--color-bg-secondary)",border:"1px solid var(--color-border)"},children:[t.jsxs("div",{className:"mb-4",children:[t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"text",placeholder:"Search bookmarks... (3+ chars for full-text)",value:u,onChange:e=>U(e.target.value),className:"w-full px-4 py-2 rounded-lg text-sm",style:{backgroundColor:"var(--color-bg)",border:"1px solid var(--color-border)",color:"var(--color-fg)"}}),re&&t.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-xs",style:{color:"var(--color-fg-muted)"},children:"Searching..."})]}),v&&t.jsx("div",{className:"flex gap-2 mt-2",children:["all","content","research","insight"].map(e=>t.jsx("button",{type:"button",onClick:()=>te(e),className:"px-2 py-1 rounded text-xs transition-colors",style:{backgroundColor:h===e?"var(--color-accent)":"var(--color-bg)",color:h===e?"#fff":"var(--color-fg-muted)",border:"1px solid var(--color-border)"},children:e==="all"?"All matches":e==="content"?"ðŸ“„ Content":e==="research"?"ðŸ”¬ Research":"ðŸ’¡ Insights"},e))})]}),t.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[t.jsx("span",{className:"text-xs font-medium",style:{color:"var(--color-fg-muted)"},children:"Track:"}),["mcp","founder","investor"].map(e=>{const r=d[e],l=k===e;return t.jsxs("button",{type:"button",onClick:()=>W(l?null:e),className:"px-2 py-1 rounded text-xs transition-colors",style:{backgroundColor:l?r.color:"var(--color-bg)",color:l?"#fff":"var(--color-fg-muted)",border:`1px solid ${l?r.color:"var(--color-border)"}`},children:[r.icon," ",r.label]},e)})]}),t.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[t.jsx("span",{className:"text-xs font-medium",style:{color:"var(--color-fg-muted)"},children:"Tech:"}),le.map(e=>t.jsx("button",{type:"button",onClick:()=>q(b===e?null:e),className:"px-2 py-0.5 rounded text-xs transition-colors",style:{backgroundColor:b===e?"var(--color-accent)":"var(--color-bg)",color:b===e?"#fff":"var(--color-fg-muted)",border:"1px solid var(--color-border)"},children:e},e)),_.length>x&&t.jsx("button",{type:"button",onClick:()=>Y(!F),className:"px-2 py-0.5 rounded text-xs",style:{color:"var(--color-accent)"},children:F?"Less":`+${_.length-x} more`})]}),t.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[t.jsx("span",{className:"text-xs font-medium",style:{color:"var(--color-fg-muted)"},children:"Type:"}),oe.map(e=>t.jsx("button",{type:"button",onClick:()=>H(j===e?null:e),className:"px-2 py-0.5 rounded text-xs transition-colors",style:{backgroundColor:j===e?"var(--color-accent)":"var(--color-bg)",color:j===e?"#fff":"var(--color-fg-muted)",border:"1px solid var(--color-border)"},children:e},e)),D.length>x&&t.jsx("button",{type:"button",onClick:()=>Z(!I),className:"px-2 py-0.5 rounded text-xs",style:{color:"var(--color-accent)"},children:I?"Less":`+${D.length-x} more`})]}),t.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[t.jsx("span",{className:"text-xs font-medium",style:{color:"var(--color-fg-muted)"},children:"Platform:"}),ae.map(e=>t.jsx("button",{type:"button",onClick:()=>X(N===e?null:e),className:"px-2 py-0.5 rounded text-xs transition-colors",style:{backgroundColor:N===e?"var(--color-accent)":"var(--color-bg)",color:N===e?"#fff":"var(--color-fg-muted)",border:"1px solid var(--color-border)"},children:e},e)),L.length>x&&t.jsx("button",{type:"button",onClick:()=>ee(!R),className:"px-2 py-0.5 rounded text-xs",style:{color:"var(--color-accent)"},children:R?"Less":`+${L.length-x} more`})]}),t.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-xs font-medium",style:{color:"var(--color-fg-muted)"},children:"Min Stars:"}),[1,2,3,4,5].map(e=>t.jsx("button",{type:"button",onClick:()=>Q(S===e?null:e),className:"transition-opacity",style:{opacity:S===e?1:.4},children:"â­".repeat(e)},e))]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-xs font-medium",style:{color:"var(--color-fg-muted)"},children:"Sort:"}),["analyzed","published","rating","alpha","none"].map(e=>t.jsx("button",{type:"button",onClick:()=>J(e),className:"px-2 py-0.5 rounded text-xs transition-colors",style:{backgroundColor:f===e?"var(--color-accent)":"var(--color-bg)",color:f===e?"#fff":"var(--color-fg-muted)",border:"1px solid var(--color-border)"},title:{analyzed:"Sort by date analyzed",published:"Sort by publish date",rating:"Sort by rating",alpha:"Sort alphabetically",none:"Default order"}[e],children:{analyzed:"ðŸ”¬",published:"ðŸ“…",rating:"â­",alpha:"ðŸ”¤",none:"â€”"}[e]},e))]})]})]}),t.jsxs("div",{className:"mb-4 text-sm",style:{color:"var(--color-fg-muted)"},children:["Showing ",A.length," of ",n.length," bookmarks",u&&v&&` (search: "${u}")`]}),t.jsx("div",{className:"rounded-xl overflow-hidden",style:{backgroundColor:"var(--color-bg-secondary)",border:"1px solid var(--color-border)"},children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"text-left text-xs",style:{backgroundColor:"var(--color-bg)",color:"var(--color-fg-muted)"},children:[t.jsx("th",{className:"p-3 w-12",children:"Icon"}),t.jsx("th",{className:"p-3",children:"Title"}),t.jsx("th",{className:"p-3 w-24",children:"Rating"}),t.jsx("th",{className:"p-3 w-32",children:"Track"}),t.jsx("th",{className:"p-3 w-28",children:"Published"}),t.jsx("th",{className:"p-3 w-28",children:"Analyzed"})]})}),t.jsx("tbody",{children:A.map((e,r)=>{const l=T===r;return t.jsxs("tr",{className:"border-t transition-colors cursor-pointer",style:{borderColor:"var(--color-border)",backgroundColor:l?"var(--color-bg)":"transparent"},onClick:()=>M(e.url),onKeyDown:s=>{s.key==="Enter"&&M(e.url)},onMouseEnter:()=>p(r),children:[t.jsx("td",{className:"p-3 text-center text-xl",children:e.icon||"ðŸ”—"}),t.jsxs("td",{className:"p-3",children:[t.jsx("div",{className:"font-medium truncate max-w-md",style:{color:"var(--color-fg)"},title:e.title||e.url,children:e.title||e.url}),t.jsx("div",{className:"text-xs truncate max-w-md",style:{color:"var(--color-fg-muted)"},children:e.description||new URL(e.url).hostname})]}),t.jsx("td",{className:"p-3",children:t.jsx(fe,{stars:e.stars})}),t.jsx("td",{className:"p-3",children:t.jsxs("div",{className:"flex gap-1",children:[c(e.tags,"persona:mcp_developer")&&t.jsx("span",{className:"px-1.5 py-0.5 rounded text-xs",style:{backgroundColor:`${d.mcp.color}20`,color:d.mcp.color},children:d.mcp.icon}),c(e.tags,"persona:startup_founder")&&t.jsx("span",{className:"px-1.5 py-0.5 rounded text-xs",style:{backgroundColor:`${d.founder.color}20`,color:d.founder.color},children:d.founder.icon}),c(e.tags,"persona:vc_investor")&&t.jsx("span",{className:"px-1.5 py-0.5 rounded text-xs",style:{backgroundColor:`${d.investor.color}20`,color:d.investor.color},children:d.investor.icon})]})}),t.jsx("td",{className:"p-3 text-xs",style:{color:"var(--color-fg-muted)"},children:e.published_at?new Date(e.published_at).toLocaleDateString():"â€”"}),t.jsx("td",{className:"p-3 text-xs",style:{color:"var(--color-fg-muted)"},children:e.classified_at?new Date(e.classified_at).toLocaleDateString():"â€”"})]},e.url)})})]})})}),A.length===0&&t.jsx("div",{className:"text-center py-16",children:t.jsx("p",{style:{color:"var(--color-fg-muted)"},children:"No bookmarks match your filters"})}),n.length>0&&t.jsxs("div",{className:"mt-6 p-4 rounded-lg grid grid-cols-2 md:grid-cols-4 gap-4",style:{backgroundColor:"var(--color-bg-secondary)",border:"1px solid var(--color-border)"},children:[t.jsxs("div",{children:[t.jsxs("div",{className:"text-2xl font-bold",style:{color:"var(--color-fg)"},children:[(n.reduce((e,r)=>e+(r.stars||0),0)/n.length).toFixed(1),"â­"]}),t.jsx("div",{className:"text-xs",style:{color:"var(--color-fg-muted)"},children:"Avg Rating"})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-2xl font-bold",style:{color:"#8b5cf6"},children:n.filter(e=>c(e.tags,"persona:mcp_developer")).length}),t.jsx("div",{className:"text-xs",style:{color:"var(--color-fg-muted)"},children:"MCP Developer"})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-2xl font-bold",style:{color:"#f59300"},children:n.filter(e=>c(e.tags,"persona:startup_founder")).length}),t.jsx("div",{className:"text-xs",style:{color:"var(--color-fg-muted)"},children:"Startup Founder"})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-2xl font-bold",style:{color:"#10b981"},children:n.filter(e=>c(e.tags,"persona:vc_investor")).length}),t.jsx("div",{className:"text-xs",style:{color:"var(--color-fg-muted)"},children:"VC Investor"})]})]}),i&&m&&t.jsx(ie,{bookmark:{url:i.url,title:i.title,icon:i.icon,published_at:i.published_at,classified_at:i.classified_at,tags:i.tags},initialTab:m.tab,onClose:se,onNavigateBookmark:e=>{const r=g.current,l=r.findIndex(s=>s.url===i.url);if(e==="next"){const s=l+1,w=r[s];s<r.length&&w&&(p(s),C({url:w.url,tab:m.tab}))}else{const s=l-1,w=r[s];s>=0&&w&&(p(s),C({url:w.url,tab:m.tab}))}},canNavigatePrev:g.current.findIndex(e=>e.url===i.url)>0,canNavigateNext:g.current.findIndex(e=>e.url===i.url)<g.current.length-1}),t.jsx("div",{className:"text-center py-6 mt-8",children:t.jsx("button",{type:"button",onClick:()=>{de(),window.location.reload()},className:"text-xs opacity-30 hover:opacity-60 transition-opacity cursor-pointer",style:{color:"var(--color-fg-muted)"},children:"Clear cached bookmarks"})})]})}export{je as Bookmarks};
